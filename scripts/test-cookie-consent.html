<!DOCTYPE html>
<html>
<head>
    <title>Test Cookie Consent Storage</title>
</head>
<body>
    <h1>Cookie Consent Storage Test</h1>
    <button onclick="checkStorage()">Check localStorage</button>
    <button onclick="testSave()">Test Save</button>
    <button onclick="clearStorage()">Clear Storage</button>
    <pre id="output"></pre>

    <script>
        const COOKIE_CONSENT_KEY = 'saintlammy_cookie_consent';

        function checkStorage() {
            const output = document.getElementById('output');
            const stored = localStorage.getItem(COOKIE_CONSENT_KEY);

            if (stored) {
                output.textContent = 'Found in localStorage:\n' + JSON.stringify(JSON.parse(stored), null, 2);
            } else {
                output.textContent = 'No cookie consent found in localStorage';
            }
        }

        function testSave() {
            const testData = {
                version: '1.0',
                hasConsented: true,
                consentDate: new Date().toISOString(),
                preferences: {
                    necessary: true,
                    analytics: true,
                    marketing: true,
                    preferences: true
                }
            };

            localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify(testData));
            alert('Test data saved! Refresh page to see if it persists.');
        }

        function clearStorage() {
            localStorage.removeItem(COOKIE_CONSENT_KEY);
            alert('Storage cleared!');
            checkStorage();
        }

        // Auto-check on load
        window.onload = checkStorage;
    </script>
</body>
</html>
